<div>
    <el-row :gutter="10" type="flex">
        <el-col :span="12">
            <sly-card title="Input">
                <sly-field title="" description="Project">
                    <a slot="title" target="_blank"
                       :href="`/projects/${data.projectId}/datasets`">{{data.projectName}}</a>
                    <sly-icon slot="icon" :options="{ imageUrl: `${data.projectPreviewUrl}` }"/>
                </sly-field>
            </sly-card>
        </el-col>
        <el-col :span="16" style="flex: 1">
            <sly-card title="Output" style="height: 100%">
                <sly-field v-if="data.progress === 100" title=""
                           description="New project has been successfully created">
                    <a slot="title" target="_blank" :href="`/projects/${data.resultProjectId}/datasets`">{{data.resultProject}}</a>
                    <sly-icon slot="icon" :options="{ imageUrl: `${data.resultProjectPreviewUrl}` }"/>
                </sly-field>
                <el-progress v-if="data.started === true && data.progress !== 100"
                             :percentage="data.progress"></el-progress>
                <el-button :disabled="data.finished === true" type="primary"
                           @click="command('create_trainset')" v-if="data.started === false">
                    <i class="zmdi zmdi-play" style="margin-right: 5px"></i> Run
                </el-button>
            </sly-card>
        </el-col>
    </el-row>

    <sly-card title="Settings: Train / Val splits"
              subtitle="Tag 'train' has to be assigned to at least one image and the same for tag 'val'.
                        Tag 'test' is not available in current version" style="margin-top: 15px;">

        <sly-field title="Images with tag 'train'"
                   description="Choose how many images (percent or count) will have tag 'train'">
            <div class="fflex">
                <el-slider v-model="state.percent.train"
                           show-input :min="1" :max="100"
                           style="flex:1; max-width: 99%; margin-left: 15px;"
                           @input="state.count.train = (data.totalImagesCount * state.percent.train / 100).toFixed();
                                   state.count.val = data.totalImagesCount - state.count.train;
                                   state.percent.val = 100 - state.percent.train"
                ></el-slider>
            </div>
        </sly-field>
        <sly-field title="Results overview" description="How many images will have tag train/val">
            <div>
                <el-tag>Total images count</el-tag>
                {{data.totalImagesCount}} images (100%)
            </div>
            <div class="mt10">
                <el-tag type="success"><i class="zmdi zmdi-tag mr5"></i>train</el-tag>
                {{state.count.train}} images ({{state.percent.train}} %)
            </div>
            <div class="mt10">
                <el-tag type="warning"><i class="zmdi zmdi-tag mr5"></i>val</el-tag>
                {{state.count.val}} images ({{state.percent.val}} %)
            </div>
        </sly-field>

        <el-table :data="data.table" style="width: 100%">
            <el-table-column label="Tag" width="180">
                <template scope="scope">
                    <el-icon name="time"></el-icon>
                    <span style="margin-left: 10px">{{scope.row.name}}</span>
                </template>
            </el-table-column>
            <el-table-column label="Number of images" width="180">
                <template scope="scope">
                    <el-icon name="time"></el-icon>
                    <span style="margin-left: 10px">{{state.count[scope.row.name]}}</span>
                </template>
            </el-table-column>
            <el-table-column label="Percent of images">
                <template scope="scope">
                    <el-icon name="time"></el-icon>
                    <span style="margin-left: 10px">{{state.percent[scope.row.name]}}%</span>
                </template>
            </el-table-column>
        </el-table>
    </sly-card>
</div>